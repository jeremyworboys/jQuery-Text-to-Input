jQuery.fn.textToInput=function(f){var g=this,opts=jQuery.extend({text_tag:'span',text_class:'tti_text',no_value_text:'Click here to add value...'},f);jQuery(g[0]).closest('form').submit(function(e){jQuery(this).find('.'+opts.text_class).each(function(i,a){var b=$('<input />').attr(jQuery(a).data('attrs')).attr('value',jQuery(a).text());jQuery(a).replaceWith(b)})});g.each(function(i,c){var d=jQuery(this);function input2text(e,o){if(typeof o=='undefined'){o=this}var a=jQuery('<'+opts.text_tag+'/>').data('attrs',getAttributes(c)).addClass(opts.text_class).click(text2input).text(jQuery(o).attr('value')?jQuery(o).attr('value'):opts.no_value_text);if(!jQuery(o).attr('value')){a.addClass("tti_noVal")}jQuery(o).replaceWith(a);return false}function text2input(e,o){if(typeof o=='undefined'){o=this}var a=$('<input />');if(jQuery(o).hasClass("tti_noVal")){a.attr("placeholder",jQuery(o).text()).removeClass("tti_noVal")}else{a.attr('value',jQuery(o).text())}a.attr(jQuery(o).data('attrs'));jQuery(o).replaceWith(a);a.focus().blur(input2text);return false}function getAttributes(o){var b={};jQuery.each(o.attributes,function(i,a){b[a.name]=a.value});return b}input2text(null,c)});function stop_propagation(e){e.stopPropagation();e.preventDefault();return false}return g}